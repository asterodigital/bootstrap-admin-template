---
// This script is used to generate the Table of Contents (TOC) for the documentation pages.
// The script uses the Tocbot library to generate the TOC.
import { getAssetPrefix } from "../../../utils/path.js";
---

<!-- Tocbot JS -->
<script src={getAssetPrefix("/assets/vendor/js/toc/tocbot.min.js")} is:inline></script>

<script is:inline>
  function initTocbot() {
    if (typeof window.tocbot !== "undefined") {
      window.tocbot.init({
        tocSelector: ".js-toc",
        contentSelector: ".js-toc-content",
        headingSelector: "h2, h3, h4",
        activeLinkClass: "active",
        scrollSmooth: true,
        scrollSmoothDuration: 200,
        scrollSmoothOffset: 0,
        orderedList: false,
        scrollContainer: null,
        disableTocScrollSync: false,
        linkClass: "toc-link",
        listClass: "toc-list",
        ignoreSelector: ".js-toc-ignore",
        ignoreHiddenElements: true
      });
    } else {
      console.log("Tocbot not found, retrying...");
      setTimeout(initTocbot, 100);
    }
  }

  document.addEventListener("DOMContentLoaded", function () {
    console.log("DOM loaded, starting tocbot initialization...");
    initTocbot();
  });
</script>
